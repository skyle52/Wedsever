<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/>
    <meta name="description" content=""/>
    <meta name="author" content=""/>
    <title>Tocotea Admin</title>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.2/js/dataTables.buttons.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.2/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.3.2/js/buttons.print.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v6.1.0/js/all.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/simple-datatables@latest/dist/style.css" rel="stylesheet"/>
    <link href="https://cdn.datatables.net/1.13.1/css/jquery.dataTables.min.css" rel="stylesheet">
    <link href="https://cdn.datatables.net/buttons/2.3.2/css/buttons.dataTables.min.css" rel="stylesheet">
    <link href="/css/styles.css" rel="stylesheet"/>
</head>
<body class="sb-nav-fixed">
<%- include ('topnav.ejs') %>
<div id="layoutSidenav">
    <%- include ('sidenav.ejs') %>
    <div id="layoutSidenav_content">
        <main class="container-fluid px-4">
            <h1 class="mt-4">Người dùng</h1>
            <div>
                <table id="pendingOrdersTable" class="cell-border">
                    <thead>
                    <tr>
                        <th>STT</th>
                        <th>ID</th>
                        <th>Tên khách hàng</th>
                        <th>Số điện thoại</th>
                        <th>Địa chỉ</th>
                        <th>Trạng thái hoạt động</th>
                        <th>Hoạt động</th>
                    </tr>
                    </thead>
                    <tfoot>
                    <tr>
                        <th>STT</th>
                        <th>ID</th>
                        <th>Tên khách hàng</th>
                        <th>Số điện thoại</th>
                        <th>Địa chỉ</th>
                        <th>Trạng thái hoạt động</th>
                        <th>Hoạt động</th>
                    </tr>
                    </tfoot>
                    <tbody>
                    <% for (var i = 0; i < users.length; i++) { %>
                        <tr>
                            <!-- Modal -->
                            <div class="modal fade" id="activeModal<%= users[i].id %>" tabindex="-1"
                                 aria-labelledby="exampleModalLabel"
                                 aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Xác nhận khóa/mở khóa tài
                                                khoản</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Bạn có chắc muốn khóa/mở khóa tài khoản của khách hàng <%= users[i].name %>?
                                            <form
                                                    name="activeForm<%= users[i].id %>"
                                                    enctype="application/x-www-form-urlencoded"
                                                    id="activeForm<%= users[i].id %>"
                                                    method="post"
                                                    action="/users/active"
                                            >
                                                <input value="<%= users[i].id %>" style="display: none" name="id">
                                            </form>
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                                                Đóng
                                            </button>
                                            <button type="submit" form="activeForm<%= users[i].id %>"
                                                    class="btn btn-primary">Xác nhận
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <td><%= i + 1 %></td>
                            <td><%= users[i].id %></td>
                            <td><%= users[i].name %></td>
                            <td><%= users[i].phonenumber %></td>
                            <td><%= users[i].address %></td>
                            <td><%= users[i].active %></td>
                            <td style="text-align: center">
                                <!-- Button trigger active/deactivate modal -->
                                <a class="link-primary" data-bs-toggle="modal"
                                   data-bs-target="#activeModal<%= users[i].id %>">
                                    Khóa/mở lại tài khoản
                                </a>
                            </td>
                        </tr>
                    <% } %>
                    </tbody>
                </table>
            </div>
        </main>
        <footer class="py-4 bg-light mt-auto">
            <div class="container-fluid px-4">
                <div class="d-flex align-items-center justify-content-between small">
                    <div class="text-muted">Copyright &copy; Tocotea</div>
                    <div>
                        <a href="#">Về chúng tôi</a>
                        &middot;
                        <a href="#">Danh sách cửa hàng</a>
                    </div>
                </div>
            </div>
        </footer>
    </div>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
<script src="/js/scripts.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js" crossorigin="anonymous"></script>
<script src="/assets/demo/chart-area-demo.js"></script>
<script src="/assets/demo/chart-bar-demo.js"></script>
<script src="https://cdn.jsdelivr.net/npm/simple-datatables@latest" crossorigin="anonymous"></script>
<script src="/js/datatables-simple-demo.js"></script>
</body>
</html>
